{
  "openapi": "3.0.0",
  "info": {
    "title": "Translation Management Service API",
    "description": "API for managing translations, locales, and tags",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "email": "support@example.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8000/api/v1",
      "description": "Local Development Server"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter the API token"
      }
    },
    "schemas": {
      "Translation": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "key": { "type": "string" },
          "value": { "type": "string" },
          "locale": { "type": "string" },
          "locale_id": { "type": "integer" },
          "tags": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/Tag" }
          }
        }
      },
      "Locale": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "code": { "type": "string" },
          "name": { "type": "string" },
          "native_name": { "type": "string" },
          "is_active": { "type": "boolean" },
          "order": { "type": "integer" }
        }
      },
      "Tag": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "name": { "type": "string" },
          "color": { "type": "string" }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      }
    }
  },
  "paths": {
    "/auth/token": {
      "post": {
        "summary": "Generate API token",
        "description": "Generate an API token for authentication",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "password": { "type": "string", "format": "password" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": { "type": "string" },
                    "user": { "$ref": "#/components/schemas/User" }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/translations": {
      "get": {
        "summary": "Get all translations",
        "description": "Retrieve paginated list of translations",
        "tags": ["Translations"],
        "parameters": [
          {
            "name": "per_page",
            "in": "query",
            "description": "Number of items per page",
            "schema": { "type": "integer", "default": 1000 }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number",
            "schema": { "type": "integer", "default": 1 }
          }
        ],
        "responses": {
          "200": {
            "description": "List of translations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Translation" }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a translation",
        "description": "Create a new translation entry",
        "tags": ["Translations"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["key", "locale_id"],
                "properties": {
                  "key": { "type": "string" },
                  "value": { "type": "string" },
                  "locale_id": { "type": "integer" },
                  "tag_ids": { "type": "array", "items": { "type": "integer" } }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Translation created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Translation" }
              }
            }
          }
        }
      }
    },
    "/translations/{id}": {
      "get": {
        "summary": "Get a translation",
        "tags": ["Translations"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "Translation details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Translation" }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a translation",
        "tags": ["Translations"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "key": { "type": "string" },
                  "value": { "type": "string" },
                  "locale_id": { "type": "integer" },
                  "tag_ids": { "type": "array", "items": { "type": "integer" } }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Translation updated"
          }
        }
      },
      "delete": {
        "summary": "Delete a translation",
        "tags": ["Translations"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "Translation deleted"
          }
        }
      }
    },
    "/translations/search": {
      "get": {
        "summary": "Search translations",
        "tags": ["Translations"],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "Search query",
            "schema": { "type": "string" }
          },
          {
            "name": "locale",
            "in": "query",
            "description": "Filter by locale code",
            "schema": { "type": "string" }
          },
          {
            "name": "tag",
            "in": "query",
            "description": "Filter by tag name",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Search results"
          }
        }
      }
    },
    "/translations/export/json": {
      "get": {
        "summary": "Export translations as JSON",
        "tags": ["Translations"],
        "parameters": [
          {
            "name": "locales",
            "in": "query",
            "description": "Comma-separated locale codes",
            "schema": { "type": "string", "default": "en" }
          },
          {
            "name": "tag",
            "in": "query",
            "description": "Filter by tag name",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "JSON export of translations"
          }
        }
      }
    },
    "/locales": {
      "get": {
        "summary": "Get all locales",
        "tags": ["Locales"],
        "responses": {
          "200": {
            "description": "List of locales",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/Locale" }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a locale",
        "tags": ["Locales"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["code", "name"],
                "properties": {
                  "code": { "type": "string" },
                  "name": { "type": "string" },
                  "native_name": { "type": "string" },
                  "is_active": { "type": "boolean" },
                  "order": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Locale created"
          }
        }
      }
    },
    "/locales/{id}": {
      "get": {
        "summary": "Get a locale",
        "tags": ["Locales"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "Locale details"
          }
        }
      },
      "put": {
        "summary": "Update a locale",
        "tags": ["Locales"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "Locale updated"
          }
        }
      },
      "delete": {
        "summary": "Delete a locale",
        "tags": ["Locales"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "Locale deleted"
          }
        }
      }
    },
    "/tags": {
      "get": {
        "summary": "Get all tags",
        "tags": ["Tags"],
        "responses": {
          "200": {
            "description": "List of tags",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/Tag" }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a tag",
        "tags": ["Tags"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "color"],
                "properties": {
                  "name": { "type": "string" },
                  "color": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tag created"
          }
        }
      }
    },
    "/tags/{id}": {
      "get": {
        "summary": "Get a tag",
        "tags": ["Tags"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "Tag details"
          }
        }
      },
      "put": {
        "summary": "Update a tag",
        "tags": ["Tags"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "Tag updated"
          }
        }
      },
      "delete": {
        "summary": "Delete a tag",
        "tags": ["Tags"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "Tag deleted"
          }
        }
      }
    }
  }
}
